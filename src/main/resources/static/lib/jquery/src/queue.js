define(["./core","./deferred","./callbacks"],function(e){return e.extend({queue:function(u,t,n){var r;return u?(t=(t||"fx")+"queue",r=e._data(u,t),n&&(!r||e.isArray(n)?r=e._data(u,t,e.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(u,t){t=t||"fx";var n=e.queue(u,t),r=n.length,i=n.shift(),o=e._queueHooks(u,t),s=function(){e.dequeue(u,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(u,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(u,t){var n=t+"queueHooks";return e._data(u,n)||e._data(u,n,{empty:e.Callbacks("once memory").add(function(){e._removeData(u,t+"queue"),e._removeData(u,n)})})}}),e.fn.extend({queue:function(u,t){var n=2;return"string"!=typeof u&&(t=u,u="fx",n--),arguments.length<n?e.queue(this[0],u):void 0===t?this:this.each(function(){var n=e.queue(this,u,t);e._queueHooks(this,u),"fx"===u&&"inprogress"!==n[0]&&e.dequeue(this,u)})},dequeue:function(u){return this.each(function(){e.dequeue(this,u)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(u,t){var n,r=1,i=e.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof u&&(t=u,u=void 0),u=u||"fx";s--;)n=e._data(o[s],u+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}}),e});
//# sourceMappingURL=../../jquery/src/queue.js.map