define(["../core","../var/support","../ajax"],function(e,t){function n(){try{return new window.XMLHttpRequest}catch(e){}}function o(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}e.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&n()||o()}:n;var a=0,i={},r=e.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var e in i)i[e](void 0,!0)}),t.cors=!!r&&"withCredentials"in r,r=t.ajax=!!r,r&&e.ajaxTransport(function(n){if(!n.crossDomain||t.cors){var o;return{send:function(t,r){var s,c=n.xhr(),d=++a;if(c.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(s in n.xhrFields)c[s]=n.xhrFields[s];n.mimeType&&c.overrideMimeType&&c.overrideMimeType(n.mimeType),n.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");for(s in t)void 0!==t[s]&&c.setRequestHeader(s,t[s]+"");c.send(n.hasContent&&n.data||null),o=function(t,a){var s,u,p;if(o&&(a||4===c.readyState))if(delete i[d],o=void 0,c.onreadystatechange=e.noop,a)4!==c.readyState&&c.abort();else{p={},s=c.status,"string"==typeof c.responseText&&(p.text=c.responseText);try{u=c.statusText}catch(h){u=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}p&&r(s,u,p,c.getAllResponseHeaders())},n.async?4===c.readyState?setTimeout(o):c.onreadystatechange=i[d]=o:o()},abort:function(){o&&o(void 0,!0)}}}})});
//# sourceMappingURL=../../../jquery/src/ajax/xhr.js.map